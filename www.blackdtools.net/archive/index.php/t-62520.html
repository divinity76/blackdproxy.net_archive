<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta name="keywords" content="tmpstr, green, events, messages, source, itemcount, detect, nameofgivenid, sniffed, var_lastsenderidconnection, gameserver1, packet, false, message, itsme, processeventmsg, found, idconnection, blackd, subtype, monsters, var_lastmsgidconnection, getthelongpacketpos, discover, otservers, module, 7.6-7.72, playing, system, recently, started, apple, packetpos, monster, oldmessage_h10, chrpacketpos" />
	<meta name="description" content="Hi there! Recently I started playing on 7.6-7.72 otservers and I discover that events module doesnt detect green messages like &quot;You see an apple.&quot; So how should I edit source to make it work? 
 
      Case oldmessage_H10 
        ' monster say 
        lonN = GetTheLong(packet(pos + 6), packet(pos + 7)) 
        pos = pos + 8 
         tmpStr = &quot;&quot; 
        For itemCount = 1 To lonN 
          tmpStr = tmpStr &amp; Chr(packet(pos)) 
          pos = pos + 1" />
	
	<title> Events - system (green messages) detect [Archive]  - Blackdtools Tibia Forum</title>
	<link rel="stylesheet" type="text/css" href="../archive.css" />
</head>
<body>
<div class="pagebody">
<div id="navbar"><a href="../index.php%3Fpda=1.html">Blackdtools Tibia Forum</a> &gt; <a href="f-4.html">General</a> &gt; <a href="f-7.html">Programmer's corner</a> &gt;  Events - system (green messages) detect</div>
<hr />
<div class="pda"><a href="t-62520.html%3Flogin=1.html" rel="nofollow">Log in</a></div>
<p class="largefont">View Full Version : <a href="https://www.blackdtools.net/showthread.php?62520-Events-system-(green-messages)-detect">Events - system (green messages) detect</a></p>
<hr />
<div class="floatcontainer"></div><br />
<div class="post"><div class="posttop"><div class="username">Gammer</div><div class="date">09-24-2015, 17:16</div></div><div class="posttext">Hi there! Recently I started playing on 7.6-7.72 otservers and I discover that events module doesnt detect green messages like &quot;You see an apple.&quot; So how should I edit source to make it work?<br />
<br />
<br />
      Case oldmessage_H10<br />
        ' monster say<br />
        lonN = GetTheLong(packet(pos + 6), packet(pos + 7))<br />
        pos = pos + 8<br />
         tmpStr = &quot;&quot;<br />
        For itemCount = 1 To lonN<br />
          tmpStr = tmpStr &amp; Chr(packet(pos))<br />
          pos = pos + 1<br />
        Next itemCount<br />
        If (itsMe = False) Then<br />
          var_lastsender(idConnection) = nameofgivenID<br />
          var_lastmsg(idConnection) = tmpStr<br />
          ProcessEventMsg idConnection, subType<br />
        End If<br />
<br />
I found this part in blackd source and want to edit this part (im not using events on monsters) to make it work with green messages. <br />
There is one sniffed packet (green message 'You see..):<br />
<br />
GAMESERVER1&lt;( hex ) 19 00 B4 16 15 00 59 6F 75 20 73 65 65 20 61 20 72 61 63 65 20 74 72 61 63 6B 2E</div></div><hr />


<div id="copyright">Powered by vBulletin&reg; Version 4.2.5 Copyright &copy; 2021 vBulletin Solutions Inc. All rights reserved.</div>
</div>
</body>
</html>